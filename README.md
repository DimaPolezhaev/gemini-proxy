# üñ•Ô∏è –°–µ—Ä–≤–µ—Ä ¬´–ü–µ—Ä–æ –ñ–∏–∑–Ω–∏¬ª ‚Äì API –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π, –∞—É–¥–∏–æ –∏ –≤–∏–¥–µ–æ

**–°–µ—Ä–≤–µ—Ä–Ω–∞—è —á–∞—Å—Ç—å –ø—Ä–æ–µ–∫—Ç–∞ ¬´–ü–µ—Ä–æ –ñ–∏–∑–Ω–∏¬ª, –æ–±–µ—Å–ø–µ—á–∏–≤–∞—é—â–∞—è:**

* –ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—é –∞—É–¥–∏–æ –≤ WAV
* –ê–Ω–∞–ª–∏–∑ –∑–≤—É–∫–æ–≤ –ø—Ç–∏—Ü —á–µ—Ä–µ–∑ BirdNET
* –ì–µ–Ω–µ—Ä–∞—Ü–∏—é —Ç–µ–∫—Å—Ç–æ–≤–æ–≥–æ –∞–Ω–∞–ª–∏–∑–∞ –∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π —á–µ—Ä–µ–∑ Gemini AI
* –û–±—Ä–∞–±–æ—Ç–∫—É –≤–∏–¥–µ–æ –∏ –∞—É–¥–∏–æ –¥–∞–Ω–Ω—ã—Ö —Å –±–µ–∑–æ–ø–∞—Å–Ω—ã–º–∏ –ª–∏–º–∏—Ç–∞–º–∏

–°–µ—Ä–≤–µ—Ä –Ω–∞–ø–∏—Å–∞–Ω –Ω–∞ **Python + Flask** –∏ –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω –¥–ª—è —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è –Ω–∞ **Vercel (Serverless Functions)**.

---

## üì¶ –û—Å–Ω–æ–≤–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

| –≠–Ω–¥–ø–æ–∏–Ω—Ç         | –ú–µ—Ç–æ–¥ | –û–ø–∏—Å–∞–Ω–∏–µ                                                     |
| ---------------- | ----- | ------------------------------------------------------------ |
| `/ping`          | GET   | –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏ —Å–µ—Ä–≤–µ—Ä–∞ –∏ —Å—Ç–∞—Ç—É—Å–∞ FFmpeg          |
| `/`              | GET   | –ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ —Å–µ—Ä–≤–µ—Ä–∞ —Å –æ–±—â–µ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π                 |
| `/convert-audio` | POST  | –ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è –∞—É–¥–∏–æ –≤ WAV (–¥–æ 8 –ú–ë)                            |
| `/analyze-audio` | POST  | –ê–Ω–∞–ª–∏–∑ –∞—É–¥–∏–æ —á–µ—Ä–µ–∑ BirdNET + —Ç–µ–∫—Å—Ç–æ–≤—ã–π –≤—ã–≤–æ–¥ —á–µ—Ä–µ–∑ Gemini AI |
| `/generate`      | POST  | –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Ç–µ–∫—Å—Ç–∞/–∞–Ω–∞–ª–∏–∑ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è —á–µ—Ä–µ–∑ Gemini AI          |
| `/analyze-video` | POST  | –ê–Ω–∞–ª–∏–∑ –≤–∏–¥–µ–æ —Å –ø–æ–º–æ—â—å—é Gemini AI (–¥–æ 4.5 –ú–ë)                 |
| `/health`        | GET   | –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è —Å–µ—Ä–≤–∏—Å–∞ –∏ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ Gemini API          |

---

## üß† –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫ —Å–µ—Ä–≤–µ—Ä–∞

| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç                      | –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—è / –±–∏–±–ª–∏–æ—Ç–µ–∫–∞     |
| ------------------------------ | --------------------------- |
| **–Ø–∑—ã–∫**                       | Python 3.11+                |
| **–§—Ä–µ–π–º–≤–æ—Ä–∫**                  | Flask                       |
| **–ê—É–¥–∏–æ –æ–±—Ä–∞–±–æ—Ç–∫–∞**            | pydub + ffmpeg              |
| **–í–∏–¥–µ–æ –æ–±—Ä–∞–±–æ—Ç–∫–∞**            | ffmpeg                      |
| **–ò–ò –¥–ª—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –∏ –∞—É–¥–∏–æ** | Gemini 2.5 Flash API        |
| **–õ–æ–∫–∞–ª—å–Ω—ã–π ML –¥–ª—è –≥–æ–ª–æ—Å–æ–≤**   | BirdNET (TensorFlow Lite)   |
| **–†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ**              | Vercel Serverless Functions |
| **–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ**                | Python logging              |
| **–§–æ—Ä–º–∞—Ç—ã –¥–∞–Ω–Ω—ã—Ö**             | JSON, Base64                |

---

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç –Ω–∞ –ª–æ–∫–∞–ª—å–Ω–æ–π –º–∞—à–∏–Ω–µ

### –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

* Python 3.11+
* FFmpeg (—É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –∑–∞–ø—É—Å–∫–µ)
* –ö–ª—é—á API Gemini (`GEMINI_API_KEY`)

### –£—Å—Ç–∞–Ω–æ–≤–∫–∞

```bash
git clone https://github.com/–≤–∞—à-username/nature_identifier_api.git
cd nature_identifier_api
python -m venv venv
source venv/bin/activate  # Linux/macOS
venv\Scripts\activate     # Windows
pip install -r requirements.txt
export GEMINI_API_KEY="–í–ê–®_API_KEY"  # Linux/macOS
set GEMINI_API_KEY=–í–ê–®_API_KEY       # Windows
python server.py
```

‚úÖ –ü–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞ —Å–µ—Ä–≤–µ—Ä –±—É–¥–µ—Ç —Å–ª—É—à–∞—Ç—å `http://0.0.0.0:5000`

---

## ‚òÅÔ∏è –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ –Ω–∞ Vercel

1. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ Vercel CLI:

```bash
npm i -g vercel
```

2. –õ–æ–≥–∏–Ω –≤ Vercel:

```bash
vercel login
```

3. –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–æ–µ–∫—Ç–∞:

```bash
vercel init
```

4. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è:

* `GEMINI_API_KEY` ‚Äî –≤–∞—à –∫–ª—é—á Gemini
* –ú–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –¥—Ä—É–≥–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ, –Ω–∞–ø—Ä–∏–º–µ—Ä –ª–∏–º–∏—Ç—ã –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∞—É–¥–∏–æ/–≤–∏–¥–µ–æ

5. –î–µ–ø–ª–æ–π:

```bash
vercel --prod
```

‚ö° –ü–æ—Å–ª–µ —ç—Ç–æ–≥–æ –≤–∞—à —Å–µ—Ä–≤–µ—Ä –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–µ–Ω –∫–∞–∫ **Serverless API** –ø–æ URL Vercel.

---

## üîß –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ —Ä–∞–±–æ—Ç—ã —Å–µ—Ä–≤–µ—Ä–∞

* **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è FFmpeg**: –∑–∞–≥—Ä—É–∂–∞–µ—Ç –∏ –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç –±–∏–Ω–∞—Ä–Ω–∏–∫–∏ –¥–ª—è –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏ –∞—É–¥–∏–æ/–≤–∏–¥–µ–æ
* **Base64 –∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö**: –∞—É–¥–∏–æ, –≤–∏–¥–µ–æ –∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –ø–µ—Ä–µ–¥–∞—é—Ç—Å—è –≤ JSON
* **–ë–µ–∑–æ–ø–∞—Å–Ω—ã–µ –ª–∏–º–∏—Ç—ã**:

  * –ê—É–¥–∏–æ: –¥–æ 8 –ú–ë
  * –í–∏–¥–µ–æ: –¥–æ 4.5 –ú–ë
  * –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è: –¥–æ 3.5 –ú–ë
* **CORS** —Ä–∞–∑—Ä–µ—à—ë–Ω –¥–ª—è –≤—Å–µ—Ö –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤ (`*`)
* **–ü–æ–¥–¥–µ—Ä–∂–∫–∞ Health Check**: —ç–Ω–¥–ø–æ–∏–Ω—Ç `/health` –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å —Å–µ—Ä–≤–∏—Å–∞ –∏ Gemini API

---

## üìÑ –ü—Ä–∏–º–µ—Ä—ã –∑–∞–ø—Ä–æ—Å–æ–≤

### –ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è –∞—É–¥–∏–æ

```bash
curl -X POST https://your-vercel-url.vercel.app/convert-audio \
-H "Content-Type: application/json" \
-d '{"audio_data": "<base64_audio>", "filename": "example"}'
```

### –ê–Ω–∞–ª–∏–∑ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è

```bash
curl -X POST https://your-vercel-url.vercel.app/generate \
-H "Content-Type: application/json" \
-d '{"prompt": "–û–ø—Ä–µ–¥–µ–ª–∏ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –ø—Ç–∏—Ü—ã", "image_base64": "<base64_image>"}'
```

---

## ‚ö° –°–æ–≤–µ—Ç—ã –ø–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é

* –°—Ç–∞—Ä–∞–π—Ç–µ—Å—å **—Å–∂–∏–º–∞—Ç—å –∞—É–¥–∏–æ/–≤–∏–¥–µ–æ** –ø–µ—Ä–µ–¥ –æ—Ç–ø—Ä–∞–≤–∫–æ–π, —á—Ç–æ–±—ã –Ω–µ –ø—Ä–µ–≤—ã—à–∞—Ç—å –ª–∏–º–∏—Ç—ã Vercel
* **–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω –∫—ç—à FFmpeg** –º–µ–∂–¥—É –∑–∞–ø—Ä–æ—Å–∞–º–∏ –¥–ª—è —É—Å–∫–æ—Ä–µ–Ω–∏—è —Ä–∞–±–æ—Ç—ã
* **–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫** –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –ø–æ–Ω—è—Ç–Ω—ã–µ JSON —Å –ø–æ–ª—è–º–∏ `error` –∏ `message`

---
